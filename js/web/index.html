<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>whenwords Playground</title>
    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu,
          Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      h1 {
        color: #333;
        border-bottom: 3px solid #007acc;
        padding-bottom: 10px;
      }
      h2 {
        color: #555;
        margin-top: 30px;
        border-left: 4px solid #007acc;
        padding-left: 10px;
      }
      .example {
        background: white;
        border-radius: 8px;
        padding: 15px;
        margin: 15px 0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .example h3 {
        margin-top: 0;
        color: #007acc;
        font-size: 1em;
      }
      .code {
        background: #f8f8f8;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 10px;
        margin: 10px 0;
        font-family: 'Courier New', monospace;
        font-size: 0.9em;
        overflow-x: auto;
      }
      .result {
        background: #e8f4f8;
        border-left: 4px solid #007acc;
        padding: 10px;
        margin: 10px 0;
        font-weight: bold;
      }
      .error {
        background: #ffebee;
        border-left: 4px solid #c62828;
        padding: 10px;
        margin: 10px 0;
        color: #c62828;
      }
      .description {
        color: #666;
        font-style: italic;
        margin: 5px 0;
      }
    </style>
  </head>
  <body>
    <h1>whenwords Playground</h1>
    <p>
      Interactive examples of the whenwords library for human-friendly time
      formatting and parsing.
    </p>

    <h2>timeago() - Relative Time Strings</h2>
    <div id="timeago-examples"></div>

    <h2>duration() - Format Durations</h2>
    <div id="duration-examples"></div>

    <h2>parseDuration() - Parse Duration Strings</h2>
    <div id="parse-duration-examples"></div>

    <h2>humanDate() - Contextual Dates</h2>
    <div id="human-date-examples"></div>

    <h2>dateRange() - Date Ranges</h2>
    <div id="date-range-examples"></div>

    <script type="module">
      import {
        timeago,
        duration,
        parseDuration,
        humanDate,
        dateRange,
      } from '../src/whenwords.js';

      // Helper function to render examples
      function renderExample(container, title, code, result, description) {
        const div = document.createElement('div');
        div.className = 'example';

        const titleEl = document.createElement('h3');
        titleEl.textContent = title;
        div.appendChild(titleEl);

        if (description) {
          const descEl = document.createElement('div');
          descEl.className = 'description';
          descEl.textContent = description;
          div.appendChild(descEl);
        }

        const codeEl = document.createElement('div');
        codeEl.className = 'code';
        codeEl.textContent = code;
        div.appendChild(codeEl);

        const resultEl = document.createElement('div');
        resultEl.className = result.error ? 'error' : 'result';
        resultEl.textContent = result.error
          ? `Error: ${result.value}`
          : `Result: ${result.value}`;
        div.appendChild(resultEl);

        container.appendChild(div);
      }

      // Get current time in Unix seconds
      const now = Math.floor(Date.now() / 1000);

      // timeago examples
      const timeagoContainer = document.getElementById('timeago-examples');

      renderExample(
        timeagoContainer,
        'Just now',
        `timeago(${now}, ${now})`,
        { value: timeago(now, now) },
        'Timestamps less than 45 seconds apart'
      );

      const oneHourAgo = now - 3600;
      renderExample(
        timeagoContainer,
        'Past time',
        `timeago(${oneHourAgo}, ${now})`,
        { value: timeago(oneHourAgo, now) },
        'One hour ago'
      );

      const inThreeHours = now + 3 * 3600;
      renderExample(
        timeagoContainer,
        'Future time',
        `timeago(${inThreeHours}, ${now})`,
        { value: timeago(inThreeHours, now) },
        'Three hours from now'
      );

      const twoDaysAgo = now - 2 * 86400;
      renderExample(
        timeagoContainer,
        'Days ago',
        `timeago(${twoDaysAgo}, ${now})`,
        { value: timeago(twoDaysAgo, now) },
        'Two days ago'
      );

      const twoMonthsAgo = now - 60 * 86400;
      renderExample(
        timeagoContainer,
        'Months ago',
        `timeago(${twoMonthsAgo}, ${now})`,
        { value: timeago(twoMonthsAgo, now) },
        'About two months ago'
      );

      // duration examples
      const durationContainer = document.getElementById('duration-examples');

      renderExample(
        durationContainer,
        'Simple duration',
        `duration(3661)`,
        { value: duration(3661) },
        'One hour and one minute'
      );

      renderExample(
        durationContainer,
        'Compact format',
        `duration(3661, { compact: true })`,
        { value: duration(3661, { compact: true }) },
        'Compact style with abbreviated units'
      );

      renderExample(
        durationContainer,
        'Max units',
        `duration(9000, { max_units: 1 })`,
        { value: duration(9000, { max_units: 1 }) },
        'Show only the largest unit'
      );

      renderExample(
        durationContainer,
        'Multiple units',
        `duration(90061)`,
        { value: duration(90061) },
        'Default: show up to 2 units'
      );

      renderExample(
        durationContainer,
        'Zero seconds',
        `duration(0)`,
        { value: duration(0) },
        'Special case: zero duration'
      );

      renderExample(
        durationContainer,
        'Compact with max units',
        `duration(93784, { compact: true, max_units: 3 })`,
        { value: duration(93784, { compact: true, max_units: 3 }) },
        'Compact format with 3 units'
      );

      try {
        duration(-100);
      } catch (e) {
        renderExample(
          durationContainer,
          'Error: negative duration',
          `duration(-100)`,
          { value: e.message, error: true },
          'Negative durations are not allowed'
        );
      }

      // parseDuration examples
      const parseDurationContainer = document.getElementById(
        'parse-duration-examples'
      );

      renderExample(
        parseDurationContainer,
        'Compact format',
        `parseDuration('2h30m')`,
        { value: parseDuration('2h30m') },
        'Parse compact duration string'
      );

      renderExample(
        parseDurationContainer,
        'Verbose format',
        `parseDuration('2 hours 30 minutes')`,
        { value: parseDuration('2 hours 30 minutes') },
        'Parse verbose duration string'
      );

      renderExample(
        parseDurationContainer,
        'Colon notation (h:mm)',
        `parseDuration('2:30')`,
        { value: parseDuration('2:30') },
        'Parse colon-separated time'
      );

      renderExample(
        parseDurationContainer,
        'Colon notation (h:mm:ss)',
        `parseDuration('1:30:00')`,
        { value: parseDuration('1:30:00') },
        'Parse full time format'
      );

      renderExample(
        parseDurationContainer,
        'Mixed format',
        `parseDuration('1 day, 2 hours, and 30 minutes')`,
        { value: parseDuration('1 day, 2 hours, and 30 minutes') },
        'Parse natural language with commas and "and"'
      );

      renderExample(
        parseDurationContainer,
        'Decimal values',
        `parseDuration('2.5 hours')`,
        { value: parseDuration('2.5 hours') },
        'Parse decimal values'
      );

      try {
        parseDuration('');
      } catch (e) {
        renderExample(
          parseDurationContainer,
          'Error: empty string',
          `parseDuration('')`,
          { value: e.message, error: true },
          'Cannot parse empty string'
        );
      }

      try {
        parseDuration('invalid text');
      } catch (e) {
        renderExample(
          parseDurationContainer,
          'Error: no units',
          `parseDuration('invalid text')`,
          { value: e.message, error: true },
          'String must contain parseable units'
        );
      }

      // humanDate examples
      const humanDateContainer = document.getElementById('human-date-examples');

      renderExample(
        humanDateContainer,
        'Today',
        `humanDate(${now}, ${now})`,
        { value: humanDate(now, now) },
        'Same day'
      );

      const yesterday = now - 86400;
      renderExample(
        humanDateContainer,
        'Yesterday',
        `humanDate(${yesterday}, ${now})`,
        { value: humanDate(yesterday, now) },
        'One day ago'
      );

      const tomorrow = now + 86400;
      renderExample(
        humanDateContainer,
        'Tomorrow',
        `humanDate(${tomorrow}, ${now})`,
        { value: humanDate(tomorrow, now) },
        'One day ahead'
      );

      const threeDaysAgo = now - 3 * 86400;
      renderExample(
        humanDateContainer,
        'Last weekday',
        `humanDate(${threeDaysAgo}, ${now})`,
        { value: humanDate(threeDaysAgo, now) },
        '2-6 days ago shows "Last [Weekday]"'
      );

      const fourDaysAhead = now + 4 * 86400;
      renderExample(
        humanDateContainer,
        'This weekday',
        `humanDate(${fourDaysAhead}, ${now})`,
        { value: humanDate(fourDaysAhead, now) },
        '2-6 days ahead shows "This [Weekday]"'
      );

      const twoWeeksAgo = now - 14 * 86400;
      renderExample(
        humanDateContainer,
        'Same year',
        `humanDate(${twoWeeksAgo}, ${now})`,
        { value: humanDate(twoWeeksAgo, now) },
        'Shows "Month Day" for same year'
      );

      const lastYear = now - 400 * 86400;
      renderExample(
        humanDateContainer,
        'Different year',
        `humanDate(${lastYear}, ${now})`,
        { value: humanDate(lastYear, now) },
        'Shows "Month Day, Year" for different year'
      );

      // dateRange examples
      const dateRangeContainer = document.getElementById('date-range-examples');

      renderExample(
        dateRangeContainer,
        'Same day',
        `dateRange(${now}, ${now})`,
        { value: dateRange(now, now) },
        'Start and end on same day'
      );

      const nextDay = now + 86400;
      renderExample(
        dateRangeContainer,
        'Same month',
        `dateRange(${now}, ${nextDay})`,
        { value: dateRange(now, nextDay) },
        'Range within same month: "Month Day–Day, Year"'
      );

      const nextMonth = now + 30 * 86400;
      renderExample(
        dateRangeContainer,
        'Same year',
        `dateRange(${now}, ${nextMonth})`,
        { value: dateRange(now, nextMonth) },
        'Range within same year: "Month Day – Month Day, Year"'
      );

      const nextYear = now + 400 * 86400;
      renderExample(
        dateRangeContainer,
        'Different years',
        `dateRange(${now}, ${nextYear})`,
        { value: dateRange(now, nextYear) },
        'Range across years: "Month Day, Year – Month Day, Year"'
      );

      const laterToday = now + 3600;
      renderExample(
        dateRangeContainer,
        'Auto-swap order',
        `dateRange(${laterToday}, ${now})`,
        { value: dateRange(laterToday, now) },
        'Automatically swaps start/end if needed'
      );
    </script>
  </body>
</html>
